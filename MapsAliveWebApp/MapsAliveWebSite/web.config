<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<configSections>
		<sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
			<sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
				<sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
			</sectionGroup>
		</sectionGroup>
	</configSections>
	
	<appSettings>
		<add key="DeveloperMode" value="1" />
		<add key="MapsAliveSqlTimeOut" value="60"/>
	</appSettings>
	
	<connectionStrings>
		<add name="MapsAliveSqlServer" connectionString="Data Source=localhost;Initial Catalog=mapsalive_V3;User ID=mapsalive_V3_login;Password=m@p$alive;Persist Security Info=True;Connect Timeout=30" providerName="System.Data.SqlClient;" />
	</connectionStrings>
	
	<system.net>
		<mailSettings>
			<smtp from="support@mapsalive.com">
				<!--	
				This note is for gmail workspace users. Ignore for other email servers.
				The SMTP password must be an App Password for the gmail account. An App Password,
				as oppossed to the Workspace account password, allows mapsalive's use of smtp.gmail.com
				to bypass 2-step-verfication. The documentation for setting the App Password is:
				https://support.google.com/accounts/answer/185833?hl=en. Note that you need to login to
				account.google.com for this, not admin.google.com. Also note that if you change the
				Google Workspace account password, the App Password gets removed which then triggers
				an SMTP error "5.7.0 Authentication Required" when sending mail.
				-->
				<network host="smtp.gmail.com" defaultCredentials="false" port="587" userName="support@yourdomain.com" password="abcd efgh ijkl mnop" />
			</smtp>
		</mailSettings>
	</system.net>
	
	<system.web>
		<customErrors mode="Off" defaultRedirect="~/User/ErrorUnexpected.aspx">
			<error statusCode="404" redirect="~/User/Error404.aspx" />
		</customErrors>
		<compilation debug="true">
			<assemblies>
				<add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
				<add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
				<add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
				<add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
				<add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
			</assemblies>
		</compilation>
		<authentication mode="Forms">
			<forms name=".ASPXAUTH" loginUrl="User/Login.aspx" timeout="43200" />
		</authentication>
		<roleManager enabled="true" defaultProvider="MapsAliveSqlRoleProvider">
			<providers>
				<add name="MapsAliveSqlRoleProvider" connectionStringName="MapsAliveSqlServer" applicationName="MapsAlive" type="System.Web.Security.SqlRoleProvider" />
			</providers>
		</roleManager>
		<membership defaultProvider="MapsAliveSqlServer" userIsOnlineTimeWindow="20">
			<providers>
				<remove name="AspNetSqlProvider" />
				<add name="MapsAliveSqlServer" type="MapsAliveMembershipProvider" connectionStringName="MapsAliveSqlServer" enablePasswordRetrieval="true" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" passwordFormat="Encrypted" minRequiredNonalphanumericCharacters="0" minRequiredPasswordLength="5" maxInvalidPasswordAttempts="5" applicationName="MapsAlive" />
			</providers>
		</membership>
		<machineKey validationKey="D898E31B0B319DB300803729CDDAB49C5B11135CB97B01AA9A5320CD418147F219059227496179FDFF81677F37846D1027B5E4269B860EEDE97FB90FACF2DFD8" decryptionKey="EF7CCF57F6DCA88707D06510580EEE84A0E3500ADF45553F" validation="SHA1" />
		<httpRuntime maxRequestLength="262144" executionTimeout="1200" />
		<pages enableEventValidation="false">
			<controls>
				<add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add tagPrefix="uc" tagName="AutoLayout" src="~\Controls\AutoLayout.ascx" />
				<add tagPrefix="uc" tagName="ImportReportTable" src="~\Controls\ImportReportTable.ascx" />
				<add tagPrefix="uc" tagName="InLineHelp" src="~\Controls\InLineHelp.ascx" />
				<add tagPrefix="uc" tagName="MarginsAndSpacing" src="~\Controls\MarginsAndSpacing.ascx" />
				<add tagPrefix="uc" tagName="TourResourceComboBox" src="~\Controls\TourResourceComboBox.ascx" />
				<add tagPrefix="uc" tagName="UploadFile" src="~\Controls\UploadFile.ascx" />
				<add tagPrefix="AvantLogic" assembly="App_Code\ServerControls\ColorSwatch.cs" namespace="AvantLogic.MapsAlive" />
				<add tagPrefix="AvantLogic" assembly="App_Code\ServerControls\QuickHelpTitle.cs" namespace="AvantLogic.MapsAlive" />
				<add tagPrefix="AvantLogic" assembly="App_Code\ServerControls\QuickInfo.cs" namespace="AvantLogic.MapsAlive" />
			</controls>
		</pages>
		<sessionState timeout="20" />
	</system.web>
	<system.webServer>
		<modules>
			<remove name="ScriptModule" />
			<add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
			<add name="ProgressModule" type="Telerik.Web.UI.RadUploadHttpModule, Telerik.Web.UI" />
		</modules>
		<handlers>
			<remove name="WebServiceHandlerFactory-Integrated" />
			<remove name="ScriptHandlerFactory" />
			<remove name="ScriptHandlerFactoryAppServices" />
			<remove name="ScriptResource" />
			<add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
			<add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
			<add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" preCondition="integratedMode" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
			<add name="AddTourView" verb="*" path="AddTourView.ashx" type="AddTourView, App_Code/HttpHandlers" />
			<add name="ExpiredTour" verb="*" path="ExpiredTour.ashx" type="ExpiredTour, App_Code/HttpHandlers" />
			<add name="ImageRenderer" verb="*" path="ImageRenderer.ashx" type="ImageRenderer, App_Code/HttpHandlers" />
			<add name="Logout" verb="*" path="Logout.ashx" type="Logout, App_Code/HttpHandlers" />
			<add name="ManageTour" verb="*" path="ManageTour.ashx" type="ManageTour, App_Code/HttpHandlers" />
			<add name="MarkerRenderer" verb="*" path="MarkerRenderer.ashx" type="MarkerRenderer, App_Code/HttpHandlers" />
			<add name="PageRenderer" verb="*" path="PageRenderer.ashx" type="PageRenderer, App_Code/HttpHandlers" />
			<add name="PerformAction" verb="*" path="PerformAction.ashx" type="PerformAction, App_Code/HttpHandlers" />
			<add name="Thumbnail" verb="*" path="Thumbnail.ashx" type="Thumbnail, App_Code/HttpHandlers" />
			<add name="SlideText" verb="*" path="SlideText.ashx" type="SlideText, App_Code/HttpHandlers" />
			<add name="SymbolRenderer" verb="*" path="SymbolRenderer.ashx" type="SymbolRenderer, App_Code/HttpHandlers" />
			<add name="TourPageEditor" verb="*" path="TourPageEditor.ashx" type="TourPageEditor, App_Code/HttpHandlers" />
			<add name="TourViewEditor" verb="*" path="TourViewEditor.ashx" type="TourViewEditor, App_Code/HttpHandlers" />
			<add name="TelerikRadUploadProgressHandler" verb="*" path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.RadUploadProgressHandler, Telerik.Web.UI" />
			<add name="TelerikDialogHandler" verb="*" path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" />
			<add name="TelerikSpellCheckHandler" verb="*" path="Telerik.Web.UI.SpellCheckHandler.axd" type="Telerik.Web.UI.SpellCheckHandler, Telerik.Web.UI" />
		</handlers>
		<security>
			<requestFiltering>
				<requestLimits maxAllowedContentLength="1024000000" />
			</requestFiltering>
		</security>
		<rewrite>
			<rules>
				<clear />
				<rule name="Redirect Public to explore.mapsalive.com" stopProcessing="true" enabled="false">
					<match url="^(public)(.*)" ignoreCase="true" />
					<action type="Redirect" url="https://explore.mapsalive.com{R:2}" redirectType="Permanent" appendQueryString="true" />
				</rule>
				<rule name="Redirect Docs to docs.mapsalive.com" stopProcessing="true" enabled="false">
					<match url="^(docs)(.*)" ignoreCase="true" />
					<action type="Redirect" url="https://docs.mapsalive.com{R:2}" redirectType="Permanent" appendQueryString="true" />
				</rule>
				<rule name="Redirect Acadia to acadia.mapsalive.com" stopProcessing="true" enabled="false">
					<match url="^(acadia)(.*)" ignoreCase="true" />
					<action type="Redirect" url="https://acadia.mapsalive.com{R:2}" redirectType="Permanent" appendQueryString="true" />
				</rule>
				<rule name="Rewrite rule for StaticRedirects" enabled="true">
					<match url=".*" />
					<conditions logicalGrouping="MatchAll" trackAllCaptures="false">
						<add input="{StaticRedirects:{REQUEST_URI}}" pattern="(.+)" />
					</conditions>
					<action type="Redirect" url="{C:1}" appendQueryString="false" redirectType="Permanent" />
				</rule>
			</rules>
			<rewriteMaps>
				<rewriteMap name="StaticRedirects">
					<add key="/login" value="user/login.aspx" />
				</rewriteMap>
			</rewriteMaps>
		</rewrite>
		<httpErrors>
			<remove statusCode="404" subStatusCode="-1" />
			<error statusCode="404" prefixLanguageFilePath="" path="/User/Error404.aspx" responseMode="ExecuteURL" />
		</httpErrors>
	</system.webServer>
	<system.codedom>
		<compilers>
			<compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CSharp.CSharpCodeProvider,System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4">
				<providerOption name="CompilerVersion" value="v3.5" />
				<providerOption name="WarnAsError" value="false" />
			</compiler>
			<compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4">
				<providerOption name="CompilerVersion" value="v3.5" />
				<providerOption name="OptionInfer" value="true" />
				<providerOption name="WarnAsError" value="false" />
			</compiler>
		</compilers>
	</system.codedom>
	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0" />
			</dependentAssembly>
		</assemblyBinding>
	</runtime>
</configuration>